

Here’s when to use some common codes in practice:
- `200 OK` → Successful GET/PUT/PATCH (default).
- `201 Created` → Use for POST when a new resource is created.
- `204 No Content` → Use when you want to return no body 
- `400 Bad Request` → Client sent invalid data (e.g., invalid JSON, wrong type).
- `401 Unauthorized` → Authentication is missing/invalid.
- `403 Forbidden` → User is authenticated but doesn’t have permission.
- `404 Not Found` → Resource doesn’t exist (e.g., user ID not found).
- `422 Unprocessable Entity` → Validation error (e.g., Pydantic validation failed) – this is handled automatically by FastAPI.
- `429 Too Many Requests` → Rate limiting (often in middleware).
- `500 Internal Server Error` → Unhandled server exception (FastAPI sends this by default).

```python
from fastapi.responses import JSONResponse
@app.get("/getuserdata")
def getuserdata():
    try:
        conn.commit()
        pool.execute("select * from studentsinfo")
        data = pool.fetchall()
        return {"studentdata": data}
    except Exception as err:
        return JSONResponse(status_code=400, content={"error": str(err)})
```
